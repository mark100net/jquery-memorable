(function($){$.fn.memorable=function(options){var defaults={rememberPosition:true,rememberSize:true,expiry:30,dataPrefix:"",cookiePath:"/",forceCookies:false,debug:false},settings=$.extend({},defaults,options);if(settings.rememberSize&&!$.isFunction($.debounce)){if(window.console){console.log("FATAL: The jquery-memorable plugin size memory requires the debounce plugin "+"available at https://github.com/cowboy/jquery-throttle-debounce");return this}}this.each(function(){var $this=$(this);var debug=window.console&&settings.debug;var useCookies=settings.forceCookies||(!localStorage);if(debug){console.log("memorable instantiated on item '#"+this.id+"' using "+((useCookies)?"cookie ":"localStorage ")+" mechanism")}var datap=(settings.dataPrefix.length>0)?settings.dataPrefix:(this.id||"mmb");var storedTop,storedLeft,storedWidth,storedHeight;var tKey=datap+"_top";var lKey=datap+"_left";var hKey=datap+"_height";var wKey=datap+"_width";storedTop=(useCookies)?$.cookie(tKey):localStorage[tKey];if(storedTop){storedLeft=(useCookies)?$.cookie(lKey):localStorage[lKey];if(storedLeft){$this.offset({top:storedTop,left:storedLeft});if(debug){console.log("restored position of item '#"+this.id+"' to top: "+storedTop+" left: "+storedLeft)}}}else{if(debug){console.log("no memory of position found for item '#"+this.id+"'")}}storedWidth=(useCookies)?$.cookie(wKey):localStorage[wKey];if(storedWidth){storedHeight=(useCookies)?$.cookie(hKey):localStorage[hKey];if(storedHeight){$this.width(storedWidth);$this.height(storedHeight)}if(debug){console.log("restored size of item '#"+this.id+"' to width: "+storedWidth+" height: "+storedHeight)}}if(settings.rememberPosition){$this.bind("dragstop",function(){if(useCookies){cookieOptions={expires:settings.expiry,path:settings.cookiePath};$.cookie(tKey,$this.position().top,cookieOptions);$.cookie(lKey,$this.position().left,cookieOptions)}else{localStorage[tKey]=$this.position().top;localStorage[lKey]=$this.position().left}if(debug){console.log("stored position of item '#"+this.id+"' top: "+$this.position().top+" left: "+$this.position().left)}})}if(settings.rememberSize){$this.resize($.debounce(500,function(){if(useCookies){cookieOptions={expires:settings.expiry,path:settings.cookiePath};$.cookie(wKey,$this.width(),cookieOptions);$.cookie(hKey,$this.height(),cookieOptions)}else{localStorage[wKey]=$this.width();localStorage[hKey]=$this.height()}if(debug){console.log("stored size of item '#"+this.id+"' width: "+$this.width()+" height: "+$this.height())}}))}});return this}})(jQuery);